{"version":3,"sources":["../worker.js"],"names":["require","config","request","cheerio","options","url","process","env","CUNYfirst_url","headers","jar","getOptionsFromDropdown","body","id","$","load","children","values","i","length","data","attribs","value","getICValues","input","ICValues","name","urlProducer","ICStateNum","ICSID","inst","term","urlProducerAllClasses","subject","urlProducerSpecificCourse","course","urlProducerClassNumber","classNum","getAllSections","Promise","resolve","reject","get","error","response","submit_options","classes","idTitle","idTable","section","text","j","classNumber","className","time","room","instructor","dates","status","alt","description","getSpecificCourse","getClassByClassNumber","institutions","getClasses","instObj","termObj","term1","subjObj","subj","start","Date","getTime","module","exports"],"mappings":"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","file":"worker.js","sourcesContent":["require('dotenv').config();\nconst request = require('request');\nconst cheerio = require('cheerio');\n\nlet options = {\n    url: process.env.CUNYfirst_url,\n    headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36'},\n    jar: request.jar()\n};\n\nlet getOptionsFromDropdown = (body, id) => {\n    let $ = cheerio.load(body);\n    let options = $(id).children();\n    let values = {};\n\n    for(let i = 1; i < options.length; i++){\n        values[options[i].children[0].data] = options[i].attribs.value;\n    }\n\n    return values;\n};\n\nlet getICValues = (body) => {\n    let $ = cheerio.load(body);\n    let id ='#win0divPSHIDDENFIELDS';\n    let input = $(id).children();\n    let ICValues = {};\n\n    for(let i = 0; i < input.length; i++){\n        ICValues[input[i].attribs.name] = input[i].attribs.value;\n    }\n\n    return ICValues;\n};\n\nlet urlProducer = (ICStateNum, ICSID, inst, term) => {\n    return 'https://hrsa.cunyfirst.cuny.edu/psc/cnyhcprd/GUEST/HRMS/c/COMMUNITY_ACCESS.CLASS_SEARCH.GBL?ICAJAX=1&ICNAVTYPEDROPDOWN=0&ICType=Panel&ICElementNum=0&ICStateNum='\n        +ICStateNum+\n        '&ICAction=CLASS_SRCH_WRK2_STRM$35$&ICXPos=0&ICYPos=0&ResponsetoDiffFrame=-1&TargetFrameName=None&FacetPath=None&ICFocus&ICSaveWarningFilter=0&ICChanged=-1&ICAutoSave=0&ICResubmit=0&ICSID='\n        +ICSID+\n        '=&ICActionPrompt=false&ICBcDomData=undefined&ICFind&ICAddCount&ICAPPCLSDATA&CLASS_SRCH_WRK2_INSTITUTION$31$='\n        +inst+\n        '&CLASS_SRCH_WRK2_STRM$35$='\n        +term\n};\n\nlet urlProducerAllClasses = (ICStateNum, ICSID, term, subject) => {\n    return 'https://hrsa.cunyfirst.cuny.edu/psc/cnyhcprd/GUEST/HRMS/c/COMMUNITY_ACCESS.CLASS_SEARCH.GBL?ICAJAX=1&ICNAVTYPEDROPDOWN=0&ICType=Panel&ICElementNum=0&ICStateNum='\n        +ICStateNum+\n        '&ICAction=CLASS_SRCH_WRK2_SSR_PB_CLASS_SRCH&ICXPos=0&ICYPos=0&ResponsetoDiffFrame=-1&TargetFrameName=None&FacetPath=None&ICFocus&ICSaveWarningFilter=0&ICChanged=-1&ICAutoSave=0&ICResubmit=0&ICSID='\n        +ICSID+\n        '=&ICActionPrompt=false&ICBcDomData=undefined&ICFind&ICAddCount&ICAPPCLSDATA&CLASS_SRCH_WRK2_STRM$35$='\n        +term+\n        '&SSR_CLSRCH_WRK_SUBJECT_SRCH$0='\n        +subject+\n        '&SSR_CLSRCH_WRK_SSR_EXACT_MATCH1$1=G&SSR_CLSRCH_WRK_CATALOG_NBR$1=0&SSR_CLSRCH_WRK_SSR_OPEN_ONLY$chk$5=N'\n};\n\nlet urlProducerSpecificCourse = (ICStateNum, ICSID, term, subject, course) => {\n    return 'https://hrsa.cunyfirst.cuny.edu/psc/cnyhcprd/GUEST/HRMS/c/COMMUNITY_ACCESS.CLASS_SEARCH.GBL?ICAJAX=1&ICNAVTYPEDROPDOWN=0&ICType=Panel&ICElementNum=0&ICStateNum='\n        +ICStateNum+\n        '&ICAction=CLASS_SRCH_WRK2_SSR_PB_CLASS_SRCH&ICXPos=0&ICYPos=98&ResponsetoDiffFrame=-1&TargetFrameName=None&FacetPath=None&ICFocus=&ICSaveWarningFilter=0&ICChanged=-1&ICAutoSave=0&ICResubmit=0&ICSID='\n        +ICSID+\n        '=&ICActionPrompt=false&ICBcDomData=undefined&ICFind=&ICAddCount=&ICAPPCLSDATA=&CLASS_SRCH_WRK2_STRM$35$='\n        +term+\n        '&SSR_CLSRCH_WRK_SUBJECT_SRCH$0='\n        +subject+\n        '&SSR_CLSRCH_WRK_CATALOG_NBR$1='\n        +course+\n        '&SSR_CLSRCH_WRK_SSR_OPEN_ONLY$chk$5=N';\n};\n\nlet urlProducerClassNumber = (ICStateNum, ICSID, term, classNum) => {\n    return 'https://hrsa.cunyfirst.cuny.edu/psc/cnyhcprd/GUEST/HRMS/c/COMMUNITY_ACCESS.CLASS_SEARCH.GBL?ICAJAX=1&ICNAVTYPEDROPDOWN=0&ICType=Panel&ICElementNum=0&ICStateNum='\n        +ICStateNum+\n        '&ICAction=CLASS_SRCH_WRK2_SSR_PB_CLASS_SRCH&ICXPos=0&ICYPos=142&ResponsetoDiffFrame=-1&TargetFrameName=None&FacetPath=None&ICFocus=&ICSaveWarningFilter=0&ICChanged=-1&ICAutoSave=0&ICResubmit=0&ICSID='\n        +ICSID+\n        '=&ICActionPrompt=false&ICBcDomData=undefined&ICFind=&ICAddCount=&ICAPPCLSDATA=&CLASS_SRCH_WRK2_STRM$35$='\n        +term+\n        '&SSR_CLSRCH_WRK_CLASS_NBR$10='\n        +classNum\n};\n\nlet getAllSections = (inst, term, subject) => {\n    return new Promise((resolve, reject) => {\n        request.get(options, function(error, response, body){\n            if(error){\n                reject('CUNYfirst is currently offline.');\n            }\n\n            let ICValues = getICValues(body);\n\n            let ICStateNum = ICValues['ICStateNum'];\n            let ICSID = ICValues['ICSID'];\n\n            let submit_options = {\n                url: urlProducer(ICStateNum, ICSID, inst, term),\n                headers: {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.80 Safari/537.36'},\n                jar: options.jar\n            };\n\n            request.get(submit_options, function(error, response, body){\n                submit_options['url'] = urlProducerAllClasses(++ICStateNum, ICSID, term, subject);\n                request.get(submit_options, function(error, response, body) {\n                    if(error){\n                        reject('CUNYfirst is currently offline.');\n                    }\n\n                    let classes = {};\n                    let $ = cheerio.load(body);\n\n                    let i = 0;\n                    let idTitle = `#win0divSSR_CLSRSLT_WRK_GROUPBOX2GP\\\\$${i}`;\n                    let idTable = `#ACE_\\\\$ICField48\\\\$${i}`;\n\n                    let section = 0;\n\n                    while ($(idTitle).text() !== '') {\n                        classes[$(idTitle).text()] = {};\n\n                        for(let j = 0; j < ($(idTable).children()[0].children.length)/4; j++) {\n                            let classNumber = $(`#MTG_CLASS_NBR\\\\$${section}`).text();\n                            let className = $(`#MTG_CLASSNAME\\\\$${section}`).text();\n                            let time = $(`#MTG_DAYTIME\\\\$${section}`).text();\n                            let room = $(`#MTG_ROOM\\\\$${section}`).text();\n                            let instructor = $(`#MTG_INSTR\\\\$${section}`).text();\n                            let dates = $(`#MTG_TOPIC\\\\$${section}`).text();\n                            let status = $(`#win0divDERIVED_CLSRCH_SSR_STATUS_LONG\\\\$${section}`).children()[0].children[3].attribs.alt;\n                            let description = $(`#DERIVED_CLSRCH_DESCRLONG\\\\$${section}`).text();\n\n                            classes[$(idTitle).text()][classNumber] = {};\n                            classes[$(idTitle).text()][classNumber]['Class'] = classNumber;\n                            classes[$(idTitle).text()][classNumber]['Section'] = className;\n                            classes[$(idTitle).text()][classNumber]['Days & Time'] = time;\n                            classes[$(idTitle).text()][classNumber]['Room'] = room;\n                            classes[$(idTitle).text()][classNumber]['Instructor'] = instructor;\n                            classes[$(idTitle).text()][classNumber]['Dates'] = dates;\n                            classes[$(idTitle).text()][classNumber]['Status'] = status;\n                            classes[$(idTitle).text()][classNumber]['Description'] = description;\n\n                            section++;\n                        }\n\n                        i++;\n                        idTitle = `#win0divSSR_CLSRSLT_WRK_GROUPBOX2GP\\\\$${i}`;\n                        idTable = `#ACE_\\\\$ICField48\\\\$${i}`;\n                    }\n\n                    resolve(classes);\n                })\n            })\n        })\n    })\n};\n\nlet getSpecificCourse = (inst, term, subject, course) => {\n    return new Promise((resolve, reject) => {\n        request.get(options, function(error, response, body){\n            if(error){\n                reject('CUNYfirst is currently offline.');\n            }\n\n            let ICValues = getICValues(body);\n\n            let ICStateNum = ICValues['ICStateNum'];\n            let ICSID = ICValues['ICSID'];\n\n            let submit_options = {\n                url: urlProducer(ICStateNum, ICSID, inst, term),\n                headers: {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.80 Safari/537.36'},\n                jar: options.jar\n            };\n\n            request.get(submit_options, function(error, response, body){\n                submit_options['url'] = urlProducerSpecificCourse(++ICStateNum, ICSID, term, subject, course);\n                request.get(submit_options, function(error, response, body) {\n                    if(error){\n                        reject('CUNYfirst is currently offline.');\n                    }\n\n                    let classes = {};\n                    let $ = cheerio.load(body);\n\n                    let i = 0;\n                    let idTitle = `#win0divSSR_CLSRSLT_WRK_GROUPBOX2GP\\\\$${i}`;\n                    let idTable = `#ACE_\\\\$ICField48\\\\$${i}`;\n\n                    let section = 0;\n\n                    while ($(idTitle).text() !== '') {\n                        classes[$(idTitle).text()] = {};\n\n                        for(let j = 0; j < ($(idTable).children()[0].children.length)/4; j++) {\n                            let classNumber = $(`#MTG_CLASS_NBR\\\\$${section}`).text();\n                            let className = $(`#MTG_CLASSNAME\\\\$${section}`).text();\n                            let time = $(`#MTG_DAYTIME\\\\$${section}`).text();\n                            let room = $(`#MTG_ROOM\\\\$${section}`).text();\n                            let instructor = $(`#MTG_INSTR\\\\$${section}`).text();\n                            let dates = $(`#MTG_TOPIC\\\\$${section}`).text();\n                            let status = $(`#win0divDERIVED_CLSRCH_SSR_STATUS_LONG\\\\$${section}`).children()[0].children[3].attribs.alt;\n                            let description = $(`#DERIVED_CLSRCH_DESCRLONG\\\\$${section}`).text();\n\n                            classes[$(idTitle).text()][classNumber] = {};\n                            classes[$(idTitle).text()][classNumber]['Class'] = classNumber;\n                            classes[$(idTitle).text()][classNumber]['Section'] = className;\n                            classes[$(idTitle).text()][classNumber]['Days & Time'] = time;\n                            classes[$(idTitle).text()][classNumber]['Room'] = room;\n                            classes[$(idTitle).text()][classNumber]['Instructor'] = instructor;\n                            classes[$(idTitle).text()][classNumber]['Dates'] = dates;\n                            classes[$(idTitle).text()][classNumber]['Status'] = status;\n                            classes[$(idTitle).text()][classNumber]['Description'] = description;\n\n                            section++;\n                        }\n\n                        i++;\n                        idTitle = `#win0divSSR_CLSRSLT_WRK_GROUPBOX2GP\\\\$${i}`;\n                        idTable = `#ACE_\\\\$ICField48\\\\$${i}`;\n                    }\n\n                    resolve(classes);\n                })\n            })\n        })\n    })\n};\n\nlet getClassByClassNumber = (inst, term, classNum) => {\n    return new Promise((resolve, reject) => {\n        request.get(options, function(error, response, body){\n            if(error){\n                reject('CUNYfirst is currently offline.');\n            }\n\n            let ICValues = getICValues(body);\n\n            let ICStateNum = ICValues['ICStateNum'];\n            let ICSID = ICValues['ICSID'];\n\n            let submit_options = {\n                url: urlProducer(ICStateNum, ICSID, inst, term),\n                headers: {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.80 Safari/537.36'},\n                jar: options.jar\n            };\n\n            request.get(submit_options, function(error, response, body){\n                submit_options['url'] = urlProducerClassNumber(++ICStateNum, ICSID, term, classNum);\n                request.get(submit_options, function(error, response, body) {\n                    if(error){\n                        reject('CUNYfirst is currently offline.');\n                    }\n\n                    let classes = {};\n                    let $ = cheerio.load(body);\n\n                    let i = 0;\n                    let idTitle = `#win0divSSR_CLSRSLT_WRK_GROUPBOX2GP\\\\$${i}`;\n                    let idTable = `#ACE_\\\\$ICField48\\\\$${i}`;\n\n                    let section = 0;\n\n                    while ($(idTitle).text() !== '') {\n                        classes[$(idTitle).text()] = {};\n\n                        for(let j = 0; j < ($(idTable).children()[0].children.length)/4; j++) {\n                            let classNumber = $(`#MTG_CLASS_NBR\\\\$${section}`).text();\n                            let className = $(`#MTG_CLASSNAME\\\\$${section}`).text();\n                            let time = $(`#MTG_DAYTIME\\\\$${section}`).text();\n                            let room = $(`#MTG_ROOM\\\\$${section}`).text();\n                            let instructor = $(`#MTG_INSTR\\\\$${section}`).text();\n                            let dates = $(`#MTG_TOPIC\\\\$${section}`).text();\n                            let status = $(`#win0divDERIVED_CLSRCH_SSR_STATUS_LONG\\\\$${section}`).children()[0].children[3].attribs.alt;\n                            let description = $(`#DERIVED_CLSRCH_DESCRLONG\\\\$${section}`).text();\n\n                            classes[$(idTitle).text()][classNumber] = {};\n                            classes[$(idTitle).text()][classNumber]['Class'] = classNumber;\n                            classes[$(idTitle).text()][classNumber]['Section'] = className;\n                            classes[$(idTitle).text()][classNumber]['Days & Time'] = time;\n                            classes[$(idTitle).text()][classNumber]['Room'] = room;\n                            classes[$(idTitle).text()][classNumber]['Instructor'] = instructor;\n                            classes[$(idTitle).text()][classNumber]['Dates'] = dates;\n                            classes[$(idTitle).text()][classNumber]['Status'] = status;\n                            classes[$(idTitle).text()][classNumber]['Description'] = description;\n\n                            section++;\n                        }\n\n                        i++;\n                        idTitle = `#win0divSSR_CLSRSLT_WRK_GROUPBOX2GP\\\\$${i}`;\n                        idTable = `#ACE_\\\\$ICField48\\\\$${i}`;\n                    }\n\n                    resolve(classes);\n                })\n            })\n        })\n    })\n};\n\nlet subject = (inst, term) => {\n    return new Promise((resolve, reject) => {\n        request.get(options, function(error, response, body){\n            if(error){\n                reject('CUNYfirst is currently offline.');\n            }\n\n            let ICValues = getICValues(body);\n\n            let ICStateNum = ICValues['ICStateNum'];\n            let ICSID = ICValues['ICSID'];\n\n            let submit_options = {\n                url: urlProducer(ICStateNum, ICSID, inst, term),\n                headers: {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.80 Safari/537.36'},\n                jar: options.jar\n            };\n\n            request.get(submit_options, function(error, response, body){\n                let id = `#SSR_CLSRCH_WRK_SUBJECT_SRCH\\\\$0`;\n                resolve(getOptionsFromDropdown(body, id));\n            })\n        })\n    })\n};\n\nlet term = (inst) => {\n    return new Promise((resolve, reject) => {\n        request.get(options, function(error, response, body){\n            if(error){\n                reject('CUNYfirst is currently offline.');\n            }\n\n            let ICValues = getICValues(body);\n\n            let ICStateNum = ICValues['ICStateNum'];\n            let ICSID = ICValues['ICSID'];\n\n            let submit_options = {\n                url: urlProducer(ICStateNum, ICSID, inst, ''),\n                headers: {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.80 Safari/537.36'},\n                jar: options.jar\n            };\n\n            request.get(submit_options, function(error, response, body){\n                let id = `#CLASS_SRCH_WRK2_STRM\\\\$35\\\\$`;\n                resolve(getOptionsFromDropdown(body, id));\n            })\n        })\n    })\n\n};\n\nlet institutions = () => {\n    return new Promise((resolve, reject) => {\n        request.get(options, function(error, response, body){\n            if(error){\n                reject('CUNYfirst is currently offline.');\n            }\n\n            let id = `#CLASS_SRCH_WRK2_INSTITUTION\\\\$31\\\\$`;\n            resolve(getOptionsFromDropdown(body, id));\n        })\n    })\n};\n\nlet getClasses = async () => {\n    let instObj = await institutions();\n    let inst = instObj['Queens College'];\n\n    let termObj = await term(inst);\n    let term1 = termObj['2018 Spring Term'];\n\n    let subjObj = await subject(inst, term1);\n    let subj = subjObj['PHYS - Physics'];\n\n    return await getAllSections(inst, term1, subj);\n};\n\nlet start = new Date().getTime();\n\n// getClasses().then((classes) => {\n//     console.log(JSON.stringify(classes, undefined, 2));\n//     let end = new Date().getTime();\n//     let time = end - start;\n//     console.log('Execution time: ' + time);\n// }).catch((error) => {\n//     console.error(error);\n// });\n\n// getAllSections('QNS01', '1182', 'CSCI').then((classes) => {\n//     console.log(JSON.stringify(classes, undefined, 2));\n//     let end = new Date().getTime();\n//     let time = end - start;\n//     console.log('Execution time: ' + time);\n// }).catch((error) => {\n//     console.error(error);\n// });\n\n// getSpecificCourse('QNS01', '1182', 'ANTH', '102').then((classes) => {\n//     console.log(JSON.stringify(classes, undefined, 2));\n//     let end = new Date().getTime();\n//     let time = end - start;\n//     console.log('Execution time: ' + time);\n// }).catch((error) => {\n//     console.error(error);\n// });\n\n// getClassByClassNumber('QNS01', '1182', '22453').then((classes) => {\n//     console.log(JSON.stringify(classes, undefined, 2));\n//     let end = new Date().getTime();\n//     let time = end - start;\n//     console.log('Execution time: ' + time);\n// }).catch((error) => {\n//     console.error(error);\n// });\n\nmodule.exports = {\n    subject\n};"]}