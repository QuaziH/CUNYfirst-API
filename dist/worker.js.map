{"version":3,"sources":["../worker.js"],"names":["require","config","request","cheerio","options","url","process","env","CUNYfirst_url","headers","jar","getOptionsFromDropdown","body","id","callback","$","load","children","values","i","length","data","attribs","value","getICValues","input","ICValues","name","urlProducer","ICStateNum","ICSID","inst","term","urlProducerAllClasses","subject","urlProducerSpecificCourse","course","urlProducerClassNumber","classNum","getAllSections","get","error","response","console","log","submit_options","classes","idTitle","idTable","section","text","j","classNumber","className","time","room","instructor","dates","status","alt","description","getSpecificCourse","getClassByClassNumber","institutions","start","Date","getTime","r","JSON","stringify","undefined","end"],"mappings":"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","file":"worker.js","sourcesContent":["require('dotenv').config();\nconst request = require('request');\nconst cheerio = require('cheerio');\n\nlet options = {\n    url: process.env.CUNYfirst_url,\n    headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36'},\n    jar: request.jar()\n};\n\nlet getOptionsFromDropdown = (body, id, callback) => {\n    let $ = cheerio.load(body);\n    let options = $(id).children();\n    let values = {};\n\n    for(let i = 1; i < options.length; i++){\n        values[options[i].children[0].data] = options[i].attribs.value;\n    }\n\n    callback(values);\n};\n\nlet getICValues = (body) => {\n    let $ = cheerio.load(body);\n    let id ='#win0divPSHIDDENFIELDS';\n    let input = $(id).children();\n    let ICValues = {};\n\n    for(let i = 0; i < input.length; i++){\n        ICValues[input[i].attribs.name] = input[i].attribs.value;\n    }\n\n    return ICValues;\n};\n\nlet urlProducer = (ICStateNum, ICSID, inst, term) => {\n    return 'https://hrsa.cunyfirst.cuny.edu/psc/cnyhcprd/GUEST/HRMS/c/COMMUNITY_ACCESS.CLASS_SEARCH.GBL?ICAJAX=1&ICNAVTYPEDROPDOWN=0&ICType=Panel&ICElementNum=0&ICStateNum='\n        +ICStateNum+\n        '&ICAction=CLASS_SRCH_WRK2_STRM$35$&ICXPos=0&ICYPos=0&ResponsetoDiffFrame=-1&TargetFrameName=None&FacetPath=None&ICFocus&ICSaveWarningFilter=0&ICChanged=-1&ICAutoSave=0&ICResubmit=0&ICSID='\n        +ICSID+\n        '=&ICActionPrompt=false&ICBcDomData=undefined&ICFind&ICAddCount&ICAPPCLSDATA&CLASS_SRCH_WRK2_INSTITUTION$31$='\n        +inst+\n        '&CLASS_SRCH_WRK2_STRM$35$='\n        +term\n};\n\nlet urlProducerAllClasses = (ICStateNum, ICSID, term, subject) => {\n    return 'https://hrsa.cunyfirst.cuny.edu/psc/cnyhcprd/GUEST/HRMS/c/COMMUNITY_ACCESS.CLASS_SEARCH.GBL?ICAJAX=1&ICNAVTYPEDROPDOWN=0&ICType=Panel&ICElementNum=0&ICStateNum='\n        +ICStateNum+\n        '&ICAction=CLASS_SRCH_WRK2_SSR_PB_CLASS_SRCH&ICXPos=0&ICYPos=0&ResponsetoDiffFrame=-1&TargetFrameName=None&FacetPath=None&ICFocus&ICSaveWarningFilter=0&ICChanged=-1&ICAutoSave=0&ICResubmit=0&ICSID='\n        +ICSID+\n        '=&ICActionPrompt=false&ICBcDomData=undefined&ICFind&ICAddCount&ICAPPCLSDATA&CLASS_SRCH_WRK2_STRM$35$='\n        +term+\n        '&SSR_CLSRCH_WRK_SUBJECT_SRCH$0='\n        +subject+\n        '&SSR_CLSRCH_WRK_SSR_EXACT_MATCH1$1=G&SSR_CLSRCH_WRK_CATALOG_NBR$1=0&SSR_CLSRCH_WRK_SSR_OPEN_ONLY$chk$5=N'\n};\n\nlet urlProducerSpecificCourse = (ICStateNum, ICSID, term, subject, course) => {\n    return 'https://hrsa.cunyfirst.cuny.edu/psc/cnyhcprd/GUEST/HRMS/c/COMMUNITY_ACCESS.CLASS_SEARCH.GBL?ICAJAX=1&ICNAVTYPEDROPDOWN=0&ICType=Panel&ICElementNum=0&ICStateNum='\n        +ICStateNum+\n        '&ICAction=CLASS_SRCH_WRK2_SSR_PB_CLASS_SRCH&ICXPos=0&ICYPos=98&ResponsetoDiffFrame=-1&TargetFrameName=None&FacetPath=None&ICFocus=&ICSaveWarningFilter=0&ICChanged=-1&ICAutoSave=0&ICResubmit=0&ICSID='\n        +ICSID+\n        '=&ICActionPrompt=false&ICBcDomData=undefined&ICFind=&ICAddCount=&ICAPPCLSDATA=&CLASS_SRCH_WRK2_STRM$35$='\n        +term+\n        '&SSR_CLSRCH_WRK_SUBJECT_SRCH$0='\n        +subject+\n        '&SSR_CLSRCH_WRK_CATALOG_NBR$1='\n        +course+\n        '&SSR_CLSRCH_WRK_SSR_OPEN_ONLY$chk$5=N';\n};\n\nlet urlProducerClassNumber = (ICStateNum, ICSID, term, classNum) => {\n    return 'https://hrsa.cunyfirst.cuny.edu/psc/cnyhcprd/GUEST/HRMS/c/COMMUNITY_ACCESS.CLASS_SEARCH.GBL?ICAJAX=1&ICNAVTYPEDROPDOWN=0&ICType=Panel&ICElementNum=0&ICStateNum='\n        +ICStateNum+\n        '&ICAction=CLASS_SRCH_WRK2_SSR_PB_CLASS_SRCH&ICXPos=0&ICYPos=142&ResponsetoDiffFrame=-1&TargetFrameName=None&FacetPath=None&ICFocus=&ICSaveWarningFilter=0&ICChanged=-1&ICAutoSave=0&ICResubmit=0&ICSID='\n        +ICSID+\n        '=&ICActionPrompt=false&ICBcDomData=undefined&ICFind=&ICAddCount=&ICAPPCLSDATA=&CLASS_SRCH_WRK2_STRM$35$='\n        +term+\n        '&SSR_CLSRCH_WRK_CLASS_NBR$10='\n        +classNum\n};\n\nlet getAllSections = (inst, term, subject, callback) => {\n    request.get(options, function(error, response, body){\n        if(error){\n            console.log('CUNYfirst is currently offline.');\n        }\n\n        let ICValues = getICValues(body);\n\n        let ICStateNum = ICValues['ICStateNum'];\n        let ICSID = ICValues['ICSID'];\n\n        let submit_options = {\n            url: urlProducer(ICStateNum, ICSID, inst, term),\n            headers: {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.80 Safari/537.36'},\n            jar: options.jar\n        };\n\n        request.get(submit_options, function(error, response, body){\n            submit_options['url'] = urlProducerAllClasses(++ICStateNum, ICSID, term, subject);\n            request.get(submit_options, function(error, response, body) {\n                let classes = {};\n                let $ = cheerio.load(body);\n\n                let i = 0;\n                let idTitle = `#win0divSSR_CLSRSLT_WRK_GROUPBOX2GP\\\\$${i}`;\n                let idTable = `#ACE_\\\\$ICField48\\\\$${i}`;\n\n                let section = 0;\n\n                while ($(idTitle).text() !== '') {\n                    classes[$(idTitle).text()] = {};\n\n                    for(let j = 0; j < ($(idTable).children()[0].children.length)/4; j++) {\n                        let classNumber = $(`#MTG_CLASS_NBR\\\\$${section}`).text();\n                        let className = $(`#MTG_CLASSNAME\\\\$${section}`).text();\n                        let time = $(`#MTG_DAYTIME\\\\$${section}`).text();\n                        let room = $(`#MTG_ROOM\\\\$${section}`).text();\n                        let instructor = $(`#MTG_INSTR\\\\$${section}`).text();\n                        let dates = $(`#MTG_TOPIC\\\\$${section}`).text();\n                        let status = $(`#win0divDERIVED_CLSRCH_SSR_STATUS_LONG\\\\$${section}`).children()[0].children[3].attribs.alt;\n                        let description = $(`#DERIVED_CLSRCH_DESCRLONG\\\\$${section}`).text();\n\n                        classes[$(idTitle).text()][classNumber] = {};\n                        classes[$(idTitle).text()][classNumber]['Class'] = classNumber;\n                        classes[$(idTitle).text()][classNumber]['Section'] = className;\n                        classes[$(idTitle).text()][classNumber]['Days & Time'] = time;\n                        classes[$(idTitle).text()][classNumber]['Room'] = room;\n                        classes[$(idTitle).text()][classNumber]['Instructor'] = instructor;\n                        classes[$(idTitle).text()][classNumber]['Dates'] = dates;\n                        classes[$(idTitle).text()][classNumber]['Status'] = status;\n                        classes[$(idTitle).text()][classNumber]['Description'] = description;\n\n                        section++;\n                    }\n\n                    i++;\n                    idTitle = `#win0divSSR_CLSRSLT_WRK_GROUPBOX2GP\\\\$${i}`;\n                    idTable = `#ACE_\\\\$ICField48\\\\$${i}`;\n                }\n\n                callback(classes);\n            })\n        })\n    })\n};\n\nlet getSpecificCourse = (inst, term, subject, course, callback) => {\n    request.get(options, function(error, response, body){\n        if(error){\n            console.log('CUNYfirst is currently offline.');\n        }\n\n        let ICValues = getICValues(body);\n\n        let ICStateNum = ICValues['ICStateNum'];\n        let ICSID = ICValues['ICSID'];\n\n        let submit_options = {\n            url: urlProducer(ICStateNum, ICSID, inst, term),\n            headers: {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.80 Safari/537.36'},\n            jar: options.jar\n        };\n\n        request.get(submit_options, function(error, response, body){\n            submit_options['url'] = urlProducerSpecificCourse(++ICStateNum, ICSID, term, subject, course);\n            request.get(submit_options, function(error, response, body) {\n                let classes = {};\n                let $ = cheerio.load(body);\n\n                let i = 0;\n                let idTitle = `#win0divSSR_CLSRSLT_WRK_GROUPBOX2GP\\\\$${i}`;\n                let idTable = `#ACE_\\\\$ICField48\\\\$${i}`;\n\n                let section = 0;\n\n                while ($(idTitle).text() !== '') {\n                    classes[$(idTitle).text()] = {};\n\n                    for(let j = 0; j < ($(idTable).children()[0].children.length)/4; j++) {\n                        let classNumber = $(`#MTG_CLASS_NBR\\\\$${section}`).text();\n                        let className = $(`#MTG_CLASSNAME\\\\$${section}`).text();\n                        let time = $(`#MTG_DAYTIME\\\\$${section}`).text();\n                        let room = $(`#MTG_ROOM\\\\$${section}`).text();\n                        let instructor = $(`#MTG_INSTR\\\\$${section}`).text();\n                        let dates = $(`#MTG_TOPIC\\\\$${section}`).text();\n                        let status = $(`#win0divDERIVED_CLSRCH_SSR_STATUS_LONG\\\\$${section}`).children()[0].children[3].attribs.alt;\n                        let description = $(`#DERIVED_CLSRCH_DESCRLONG\\\\$${section}`).text();\n\n                        classes[$(idTitle).text()][classNumber] = {};\n                        classes[$(idTitle).text()][classNumber]['Class'] = classNumber;\n                        classes[$(idTitle).text()][classNumber]['Section'] = className;\n                        classes[$(idTitle).text()][classNumber]['Days & Time'] = time;\n                        classes[$(idTitle).text()][classNumber]['Room'] = room;\n                        classes[$(idTitle).text()][classNumber]['Instructor'] = instructor;\n                        classes[$(idTitle).text()][classNumber]['Dates'] = dates;\n                        classes[$(idTitle).text()][classNumber]['Status'] = status;\n                        classes[$(idTitle).text()][classNumber]['Description'] = description;\n\n                        section++;\n                    }\n\n                    i++;\n                    idTitle = `#win0divSSR_CLSRSLT_WRK_GROUPBOX2GP\\\\$${i}`;\n                    idTable = `#ACE_\\\\$ICField48\\\\$${i}`;\n                }\n\n                callback(classes);\n            })\n        })\n    })\n};\n\nlet getClassByClassNumber = (inst, term, classNum, callback) => {\n    request.get(options, function(error, response, body){\n        if(error){\n            console.log('CUNYfirst is currently offline.');\n        }\n\n        let ICValues = getICValues(body);\n\n        let ICStateNum = ICValues['ICStateNum'];\n        let ICSID = ICValues['ICSID'];\n\n        let submit_options = {\n            url: urlProducer(ICStateNum, ICSID, inst, term),\n            headers: {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.80 Safari/537.36'},\n            jar: options.jar\n        };\n\n        request.get(submit_options, function(error, response, body){\n            submit_options['url'] = urlProducerClassNumber(++ICStateNum, ICSID, term, classNum);\n            request.get(submit_options, function(error, response, body) {\n                let classes = {};\n                let $ = cheerio.load(body);\n\n                let i = 0;\n                let idTitle = `#win0divSSR_CLSRSLT_WRK_GROUPBOX2GP\\\\$${i}`;\n                let idTable = `#ACE_\\\\$ICField48\\\\$${i}`;\n\n                let section = 0;\n\n                while ($(idTitle).text() !== '') {\n                    classes[$(idTitle).text()] = {};\n\n                    for(let j = 0; j < ($(idTable).children()[0].children.length)/4; j++) {\n                        let classNumber = $(`#MTG_CLASS_NBR\\\\$${section}`).text();\n                        let className = $(`#MTG_CLASSNAME\\\\$${section}`).text();\n                        let time = $(`#MTG_DAYTIME\\\\$${section}`).text();\n                        let room = $(`#MTG_ROOM\\\\$${section}`).text();\n                        let instructor = $(`#MTG_INSTR\\\\$${section}`).text();\n                        let dates = $(`#MTG_TOPIC\\\\$${section}`).text();\n                        let status = $(`#win0divDERIVED_CLSRCH_SSR_STATUS_LONG\\\\$${section}`).children()[0].children[3].attribs.alt;\n                        let description = $(`#DERIVED_CLSRCH_DESCRLONG\\\\$${section}`).text();\n\n                        classes[$(idTitle).text()][classNumber] = {};\n                        classes[$(idTitle).text()][classNumber]['Class'] = classNumber;\n                        classes[$(idTitle).text()][classNumber]['Section'] = className;\n                        classes[$(idTitle).text()][classNumber]['Days & Time'] = time;\n                        classes[$(idTitle).text()][classNumber]['Room'] = room;\n                        classes[$(idTitle).text()][classNumber]['Instructor'] = instructor;\n                        classes[$(idTitle).text()][classNumber]['Dates'] = dates;\n                        classes[$(idTitle).text()][classNumber]['Status'] = status;\n                        classes[$(idTitle).text()][classNumber]['Description'] = description;\n\n                        section++;\n                    }\n\n                    i++;\n                    idTitle = `#win0divSSR_CLSRSLT_WRK_GROUPBOX2GP\\\\$${i}`;\n                    idTable = `#ACE_\\\\$ICField48\\\\$${i}`;\n                }\n\n                callback(classes);\n            })\n        })\n    })\n};\n\nlet subject = (inst, term, callback) => {\n    request.get(options, function(error, response, body){\n        if(error){\n            console.log('CUNYfirst is currently offline.');\n        }\n\n        let ICValues = getICValues(body);\n\n        let ICStateNum = ICValues['ICStateNum'];\n        let ICSID = ICValues['ICSID'];\n\n        let submit_options = {\n            url: urlProducer(ICStateNum, ICSID, inst, term),\n            headers: {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.80 Safari/537.36'},\n            jar: options.jar\n        };\n\n        request.get(submit_options, function(error, response, body){\n            let id = `#SSR_CLSRCH_WRK_SUBJECT_SRCH\\\\$0`;\n            getOptionsFromDropdown(body, id, callback);\n        })\n    })\n};\n\nlet term = (inst, callback) => {\n    request.get(options, function(error, response, body){\n        if(error){\n            console.log('CUNYfirst is currently offline.');\n        }\n\n        let ICValues = getICValues(body);\n\n        let ICStateNum = ICValues['ICStateNum'];\n        let ICSID = ICValues['ICSID'];\n\n        let submit_options = {\n            url: urlProducer(ICStateNum, ICSID, inst, ''),\n            headers: {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.80 Safari/537.36'},\n            jar: options.jar\n        };\n\n        request.get(submit_options, function(error, response, body){\n            let id = `#CLASS_SRCH_WRK2_STRM\\\\$35\\\\$`;\n            getOptionsFromDropdown(body, id, callback);\n        })\n    })\n};\n\nlet institutions = (callback) => {\n    request.get(options, function(error, response, body){\n        if(error){\n            console.log('CUNYfirst is currently offline.');\n        }\n\n        let id = `#CLASS_SRCH_WRK2_INSTITUTION\\\\$31\\\\$`;\n        getOptionsFromDropdown(body, id, callback);\n    })\n};\n\nlet start = new Date().getTime();\n\n// institutions(function(){\n//     term('QNS01', function(){\n//         subject('QNS01', '1182', function(){\n//             getAllSections('QNS01', '1182', 'CSCI', function(r){\n//                 console.log(JSON.stringify(r, undefined, 2));\n//                 let end = new Date().getTime();\n//                 let time = end - start;\n//                 console.log('Execution time: ' + time);\n//             });\n//         });\n//     });\n// });\n\n// getAllSections('QNS01', '1182', 'CSCI', function(r){\n//     console.log(JSON.stringify(r, undefined, 2));\n//     let end = new Date().getTime();\n//     let time = end - start;\n//     console.log('Execution time: ' + time);\n// });\n\ngetSpecificCourse('QNS01', '1182', 'PHYS', '227', function (r) {\n    console.log(JSON.stringify(r, undefined, 2));\n    let end = new Date().getTime();\n    let time = end - start;\n    console.log('Execution time: ' + time);\n});\n\n// getClassByClassNumber('QNS01', '1182', '22453', function(r){\n//     console.log(JSON.stringify(r, undefined, 2));\n//     let end = new Date().getTime();\n//     let time = end - start;\n//     console.log('Execution time: ' + time);\n// });"]}